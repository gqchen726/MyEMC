package com.briup.util;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.ObjectInputStream;
import java.io.ObjectOutputStream;

import org.apache.commons.lang3.StringUtils;

/**
 * 文件备份工具类
 * @author ghost
 *
 */
public interface FileBackupUtil {
	/**
	 * 将数据备份到文件中
	 * @param path 文件的路径
	 * @param object 数据
	 * @throws Exception
	 */
	static void store(String path,Object object) throws Exception {
		//判空
		if (StringUtils.isBlank(path)) {
			return;
		}
		//构建流
		File file = new File(path);
		if (!file.exists()) {
			file.createNewFile();
		}
		ObjectOutputStream objectOutputStream = new ObjectOutputStream(new FileOutputStream(file));
		
		objectOutputStream.writeObject(object);
		objectOutputStream.flush();
		
		objectOutputStream.close();
		
	}
	/**
	 * 将备份文件中的数据回复
	 * @param path 备份文件路径
	 * @param isDelete 是否删除
	 * @return
	 * @throws Exception
	 */
	static Object recover(String path,boolean isDelete) throws Exception {
		if (StringUtils.isBlank(path)) {
			return null;
		}
		File file = new File(path);
		if (!file.exists()) {
			return null;
		}
		ObjectInputStream objectInputStream = new ObjectInputStream(new FileInputStream(file));
		Object object = objectInputStream.readObject();
		objectInputStream.close();
		if (isDelete) {
			file.delete();
		}
		return object;
	}
}
